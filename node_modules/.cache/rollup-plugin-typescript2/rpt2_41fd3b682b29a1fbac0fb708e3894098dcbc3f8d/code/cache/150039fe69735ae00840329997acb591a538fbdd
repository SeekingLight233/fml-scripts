{"code":"// @ts-nocheck\r\nimport { findAllDeepestElementsWithText } from \"./tools\";\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    var targetNode = document.body;\r\n    var config = { childList: true, subtree: true };\r\n    var observer = new MutationObserver(function (mutationsList, observer) {\r\n        for (var _i = 0, mutationsList_1 = mutationsList; _i < mutationsList_1.length; _i++) {\r\n            var mutation = mutationsList_1[_i];\r\n            if (mutation.type === 'childList') {\r\n                updateSelectElement();\r\n                fixNumber();\r\n                if (location.href.includes(\"/events/\"))\r\n                    changeDomText(\"Get Tickets Facebook\", \"Purchase Tickets\");\r\n                setupChangeDate();\r\n            }\r\n        }\r\n    });\r\n    if (targetNode) {\r\n        observer.observe(targetNode, config);\r\n    }\r\n    else {\r\n        // console.error('Target node not found');\r\n    }\r\n});\r\nfunction updateSelectElement() {\r\n    if (!location.href.includes(\"listing-author/?dashboard=events\"))\r\n        return;\r\n    var selectElement = document.querySelector('#lp-events-form > div:nth-child(6) > div > div.row > div.col-md-4 > select');\r\n    if (selectElement) {\r\n        var firstOption = selectElement.options[0];\r\n        if (firstOption) {\r\n            firstOption.textContent = 'Ticket Purchase Link';\r\n        }\r\n        selectElement.style.width = '210px';\r\n        selectElement.style.pointerEvents = 'none';\r\n        var parentElement = selectElement.parentElement;\r\n        if (parentElement) {\r\n            parentElement.className = 'col-md-5';\r\n            var siblingElement = parentElement.nextElementSibling;\r\n            if (siblingElement) {\r\n                siblingElement.className = 'col-md-6';\r\n            }\r\n            else {\r\n                console.error('Previous sibling element not found.');\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // console.error('The select element with the specified class names was not found.');\r\n    }\r\n}\r\nfunction fixNumber() {\r\n    if (!location.href.includes(\"listing-author/?dashboard=listings\"))\r\n        return;\r\n    var firstSpan = document.querySelector(\"#select-plan-form > div:nth-child(1) > div.per_user_per_listing_price.per_user_per_listing_price-hv2 > span\");\r\n    var firstNum = firstSpan === null || firstSpan === void 0 ? void 0 : firstSpan.textContent;\r\n    // $100.004\r\n    if (firstNum) {\r\n        var parsedFirstNum = parseFloat(firstNum.replace('$', ''));\r\n        firstSpan.textContent = \"$\".concat(parsedFirstNum.toFixed(2));\r\n    }\r\n    var secondSpan = document.querySelector(\"#select-plan-form > div:nth-child(2) > div.per_user_per_listing_price.per_user_per_listing_price-hv2 > span\");\r\n    var secondNum = secondSpan === null || secondSpan === void 0 ? void 0 : secondSpan.textContent;\r\n    // $199.9965\r\n    if (secondNum) {\r\n        var parsedSecondNum = parseFloat(secondNum.replace('$', ''));\r\n        secondSpan.textContent = \"$\".concat(parsedSecondNum.toFixed(2));\r\n    }\r\n}\r\nfunction changeDomText(oriStr, newStr) {\r\n    var elems = findAllDeepestElementsWithText(oriStr);\r\n    elems.forEach(function (e) {\r\n        if (e === null || e === void 0 ? void 0 : e.textContent)\r\n            e.textContent = newStr;\r\n    });\r\n}\r\nfunction setupChangeDate() {\r\n    if (location.href.includes(\"dashboard=events\")) {\r\n        var startInput = document.querySelector(\"#event-date-s\");\r\n        var endInput = document.querySelector(\"#event-date-e\");\r\n        // 为开始日期添加监听事件\r\n        startInput === null || startInput === void 0 ? void 0 : startInput.addEventListener(\"blur\", function (e) {\r\n            formatAndSetDate(e.target);\r\n        });\r\n        // 为结束日期添加监听事件\r\n        endInput === null || endInput === void 0 ? void 0 : endInput.addEventListener('blur', function (e) {\r\n            formatAndSetDate(e.target);\r\n        });\r\n    }\r\n}\r\n// 用于格式化并设置日期的辅助函数\r\nfunction formatAndSetDate(inputElement) {\r\n    if (inputElement.value) {\r\n        console.log(\"formatAndSetDate\", inputElement.value);\r\n        var _a = inputElement.value.split('/'), month_1 = _a[0], day_1 = _a[1], year_1 = _a[2];\r\n        if (day_1 && month_1 && year_1) { // 确保日期分割后三部分都存在\r\n            setTimeout(function () {\r\n                inputElement.value = \"\".concat(day_1, \"/\").concat(month_1, \"/\").concat(year_1);\r\n            }, 10);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","references":["/Users/lifeifan/Desktop/SeekingLight/fml-scripts/src/tools.ts"],"map":"{\"version\":3,\"file\":\"index.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/index.ts\"],\"names\":[],\"mappings\":\"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\"}"}
